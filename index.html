<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tic-Tac-Toe</title>
    <style>
        :root {
            --glow-color: rgb(0, 210, 210);
            --glow-spread-color: rgba(0, 180, 210, 0.4);
            --enhanced-glow-color: rgb(100, 220, 220);
            --btn-color: rgb(0, 75, 100);
            --bg-color: rgb(0, 15, 30);
            --text-color: rgb(220, 240, 240);
        }
        
        body {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: 'Arial', sans-serif;
            text-align: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        h1 {
            font-size: 4.5vmax;
            margin: 0.5em 0;
            text-shadow: 0 0 0.3em var(--glow-color);
            letter-spacing: 2px;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(3, 20vmin);
            grid-template-rows: repeat(3, 20vmin);
            gap: 1.5vmin;
            margin: 2vmin 0;
        }
        
        .cell {
            width: 20vmin;
            height: 20vmin;
            background: rgba(0, 75, 100, 0.2);
            border: 0.25vmin solid var(--glow-color);
            font-size: 8vmin;
            font-weight: bold;
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
            box-shadow: 0 0 0.3em 0.05em var(--glow-color),
                        inset 0 0 0.2em 0.05em var(--glow-color);
            border-radius: 0.3em;
        }
        
        .cell:hover {
            background: rgba(0, 75, 100, 0.4);
        }
        
        .cell.x {
            color: rgb(255, 235, 180);
        }
        
        .cell.o {
            color: rgb(180, 235, 255);
        }
        
        .win-line {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.15);
            animation: winGlow 1.5s infinite alternate;
            border-radius: 0.3em;
        }
        
        @keyframes winGlow {
            0% { 
                box-shadow: inset 0 0 0.5em 0.1em var(--enhanced-glow-color);
                background: rgba(150, 255, 255, 0.1);
            }
            100% { 
                box-shadow: inset 0 0 1em 0.2em var(--enhanced-glow-color);
                background: rgba(150, 255, 255, 0.2);
            }
        }
        
        button {
            border: 0.1em solid var(--glow-color);
            padding: 2vmin 4vmin;
            color: var(--text-color);
            font-size: 2.5vmin;
            font-weight: bold;
            background-color: var(--btn-color);
            border-radius: 0.5em;
            outline: none;
            box-shadow: 0 0 0.5em 0.1em var(--glow-spread-color);
            position: relative;
            transition: all 0.3s;
            cursor: pointer;
            margin: 2vmin 0;
        }
        
        button:hover {
            background-color: rgba(0, 100, 130, 0.8);
            box-shadow: 0 0 0.7em 0.2em var(--glow-spread-color);
        }
        
        button:active {
            box-shadow: 0 0 0.3em 0.1em var(--glow-spread-color);
        }
        
        .player-info {
            margin-bottom: 2vmin;
            font-size: 3vmin;
        }
        
        .current-player {
            font-weight: bold;
            animation: pulseText 1.5s infinite alternate;
        }
        
        @keyframes pulseText {
            0% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        
        .game-title {
            margin-bottom: 1.5em;
        }
        
        .player-setup {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            width: 80%;
            max-width: 400px;
        }
        
        .player-setup input {
            padding: 2vmin;
            margin: 1vmin 0;
            width: 100%;
            border-radius: 5px;
            border: 1px solid var(--glow-color);
            background-color: rgba(0, 50, 70, 0.2);
            color: var(--text-color);
            outline: none;
            font-size: 2.5vmin;
        }
        
        .player-setup input:focus {
            box-shadow: 0 0 0.3em 0.05em var(--glow-color);
        }
        
        .name-display {
            font-weight: bold;
        }
        
        .game-area {
            display: none;
        }
        
        .player-setup h2 {
            margin-bottom: 15px;
            font-size: 3vmin;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 6vmax;
                margin: 0.3em 0;
            }

            .board {
                grid-template-columns: repeat(3, 25vmin);
                grid-template-rows: repeat(3, 25vmin);
                gap: 2vmin;
            }

            .cell {
                width: 25vmin;
                height: 25vmin;
                font-size: 10vmin;
            }

            button {
                padding: 3vmin 6vmin;
                font-size: 3.5vmin;
                width: 80%;
                max-width: 300px;
            }

            .player-info {
                font-size: 4vmin;
            }

            .player-setup {
                width: 90%;
            }

            .player-setup input {
                font-size: 4vmin;
                padding: 3vmin;
            }

            .player-setup h2 {
                font-size: 4vmin;
            }
        }

        @media (max-width: 400px) {
            .board {
                grid-template-columns: repeat(3, 28vmin);
                grid-template-rows: repeat(3, 28vmin);
            }

            .cell {
                width: 28vmin;
                height: 28vmin;
            }
        }
    </style>
</head>
<body>
    <div class="game-title">
        <h1>Tic-Tac-Toe</h1>
    </div>
    
    <div class="player-setup" id="player-setup">
        <h2>Enter Player Names</h2>
        <input type="text" id="player-x" placeholder="Player X (goes first)" required>
        <input type="text" id="player-o" placeholder="Player O">
        <button id="start-game-btn">Start Game</button>
    </div>
    
    <div class="game-container game-area" id="game-area">
        <div class="player-info">Current Player: <span class="name-display" id="current-player-name"></span> (<span class="current-player" id="player-display">X</span>)</div>
        <div class="board" id="board"></div>
        <button onclick="resetGame()">Restart Game</button>
        <button onclick="newPlayers()">New Players</button>
    </div>

    <script>
        const board = document.getElementById("board");
        const playerDisplay = document.getElementById("player-display");
        const currentPlayerName = document.getElementById("current-player-name");
        const playerSetup = document.getElementById("player-setup");
        const gameArea = document.getElementById("game-area");
        const startGameBtn = document.getElementById("start-game-btn");
        const playerXInput = document.getElementById("player-x");
        const playerOInput = document.getElementById("player-o");
        
        let cells = [];
        let moves = [];
        let currentPlayer = "X";
        let gameActive = true;
        let playerNames = {
            X: "",
            O: ""
        };

        startGameBtn.addEventListener("click", startGame);
        
        function startGame() {
            playerNames.X = playerXInput.value.trim() || "Player X";
            playerNames.O = playerOInput.value.trim() || "Player O";
            
            playerSetup.style.display = "none";
            gameArea.style.display = "flex";
            resetGame();
        }
        
        function newPlayers() {
            playerXInput.value = "";
            playerOInput.value = "";
            playerSetup.style.display = "flex";
            gameArea.style.display = "none";
        }

        function createBoard() {
            board.innerHTML = "";
            cells = [];
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement("div");
                cell.classList.add("cell");
                cell.dataset.index = i;
                cell.addEventListener("click", handleClick);
                cell.addEventListener('touchstart', handleTouch, { passive: true });
                board.appendChild(cell);
                cells.push(cell);
            }
            updatePlayerDisplay();
        }

        function handleClick(event) {
            processMove(event.target);
        }

        function handleTouch(event) {
            event.preventDefault();
            processMove(event.target);
        }

        function processMove(cell) {
            if (!gameActive) return;
            const index = parseInt(cell.dataset.index);
            
            if (cell.textContent === "") {
                handleMove(index);
            }
        }

        function handleMove(index) {
            cells[index].textContent = currentPlayer;
            cells[index].classList.add(currentPlayer.toLowerCase());
            moves.push({ index: index, player: currentPlayer });

            if (moves.length > 6) {
                let oldMove = moves.shift();
                cells[oldMove.index].textContent = "";
                cells[oldMove.index].classList.remove(oldMove.player.toLowerCase());
            }

            const winPattern = checkWin(currentPlayer);
            if (winPattern) {
                highlightWinLine(winPattern);
                gameActive = false;
                return;
            }

            currentPlayer = currentPlayer === "X" ? "O" : "X";
            updatePlayerDisplay();
        }

        function updatePlayerDisplay() {
            playerDisplay.textContent = currentPlayer;
            currentPlayerName.textContent = playerNames[currentPlayer];
            playerDisplay.style.color = currentPlayer === "X" ? "rgb(255, 235, 180)" : "rgb(180, 235, 255)";
        }

        function checkWin(player) {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], 
                [0, 3, 6], [1, 4, 7], [2, 5, 8], 
                [0, 4, 8], [2, 4, 6]
            ];
            for (let pattern of winPatterns) {
                if (pattern.every(index => cells[index].textContent === player)) {
                    return pattern;
                }
            }
            return null;
        }

        function highlightWinLine(pattern) {
            pattern.forEach(index => {
                let winMarker = document.createElement("div");
                winMarker.classList.add("win-line");
                cells[index].appendChild(winMarker);
            });

            setTimeout(() => {
                alert(`${playerNames[currentPlayer]} (${currentPlayer}) Wins!`);
                resetGame();
            }, 1500);
        }

        function resetGame() {
            moves = [];
            currentPlayer = "X";
            gameActive = true;
            createBoard();
        }
        
        gameArea.style.display = "none";
        playerSetup.style.display = "flex";
    </script>
</body>
</html>